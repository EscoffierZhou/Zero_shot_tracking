@echo off
:: è®¾ç½®æ§åˆ¶å°ç¼–ç ä¸º UTF-8ï¼Œé˜²æ­¢ä¸­æ–‡ä¹±ç 
chcp 65001 > nul
title ğŸš€ Zero-Shot Tracker (SAM + XMem) Launcher

echo ========================================================
echo      æ­£åœ¨å¯åŠ¨ WSL2 æ·±åº¦å­¦ä¹ ç¯å¢ƒ (RTX 4070)
echo ========================================================

:: === 1. é…ç½®è·¯å¾„ (WSL æ ¼å¼) ===
:: é¡¹ç›®æ‰€åœ¨ç›®å½•
set "PROJECT_DIR=/mnt/f/desktop/Object_Track/SAM_XMem_TensorRT"
:: è™šæ‹Ÿç¯å¢ƒæ‰€åœ¨ç›®å½•
set "VENV_DIR=/home/escoffierzhou_0523/opencv_build/venv_fix"

echo ğŸ“‚ é¡¹ç›®è·¯å¾„: %PROJECT_DIR%
echo ğŸ è™šæ‹Ÿç¯å¢ƒ: %VENV_DIR%
echo.

:: === 2. æ‰§è¡Œå‘½ä»¤ ===
echo [INFO] æ­£åœ¨è¿æ¥ WSL å­ç³»ç»Ÿ...
echo [INFO] æ­£åœ¨åŠ è½½ PyTorch ä¸æ¨¡å‹ï¼Œè¯·è€å¿ƒç­‰å¾…...
echo.
echo --------------------------------------------------------
echo  å¯åŠ¨æˆåŠŸåï¼Œè¯·åœ¨æµè§ˆå™¨è®¿é—®: http://localhost:7860/
echo --------------------------------------------------------
echo.

:: è°ƒç”¨é»˜è®¤çš„ WSL å‘è¡Œç‰ˆæ‰§è¡Œ bash å‘½ä»¤
:: é€»è¾‘: è¿›å…¥ç›®å½• -> æ¿€æ´»ç¯å¢ƒ -> è¿è¡Œ Python
wsl bash -c "cd '%PROJECT_DIR%' && source '%VENV_DIR%/bin/activate' && python app.py"

:: === 3. é€€å‡ºå¤„ç† ===
echo.
echo ========================================================
echo ğŸ›‘ ç¨‹åºå·²åœæ­¢è¿è¡Œ
echo ========================================================
pause